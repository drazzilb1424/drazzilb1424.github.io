<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>PSA Submission Info</title>
   <link rel="stylesheet" href="css/style.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
   <script src="submissions-js/search.js"></script>
</head>

<body>
   <!-- HEADER -->
   <div id="navbar-placeholder"></div>

   <script>
      fetch('header.html')
         .then(response => {
            if (!response.ok) throw new Error('header failed to load');
            return response.text();
         })
         .then(html => {
            document.getElementById('navbar-placeholder').innerHTML = html;
         })
         .catch(error => {
            console.error(error);
         });
   </script>
   <!-- END HEADER -->

   <div class="page-wrapper background">
      <!-- contact.html -->
      <div>
         <section class="contact">
            <header class="faq__header">
               <h2 class="faq__title">Contact Us</h2>
            </header>

            <div class="contact-card">

               <form action="https://formspree.io/f/movlgelj" method="POST" class="contact-form" id="contactForm">
                  <label>
                     Name
                     <input type="text" name="name" required autocomplete="name" />
                  </label>

                  <label>
                     Email
                     <input type="email" name="email" required autocomplete="email" />
                  </label>

                  <label>
                     Subject
                     <input type="text" name="subject" required />
                  </label>

                  <label>
                     Message
                     <textarea name="message" rows="6" required></textarea>
                  </label>

                  <!-- Honeypot (spam trap) -->
                  <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" style="display:none" />

                  <!-- Optional: redirect after success -->
                  <input type="hidden" name="_redirect" value="/thank-you.html" />

                  <button class="contact-submit" type="submit">Send</button>
                  <p id="formStatus" aria-live="polite" class="status"></p>

                  <script>
                     document.getElementById('contactForm').addEventListener('submit', async (e) => {
                        e.preventDefault();
                        const body = new FormData(e.target);
                        const res = await fetch('/api/contact', { method: 'POST', body });
                        // handle success/fail...
                     });
                  </script>
               </form>
            </div>
         </section>
      </div>
   </div>

   <!-- FOOTER -->
   <div id="footer-placeholder"></div>
   <script>
      fetch('footer.html')
         .then(response => {
            if (!response.ok) throw new Error('footer failed to load');
            return response.text();
         })
         .then(html => {
            document.getElementById('footer-placeholder').innerHTML = html;
         })
         .catch(error => {
            console.error(error);
         });
   </script>
   <!-- END FOOTER -->

   <script>
      const form = document.getElementById('contactForm');
      const statusEl = document.getElementById('formStatus');

      form.addEventListener('submit', async (e) => {
         e.preventDefault();
         const data = new FormData(form);
         statusEl.textContent = 'Sending...';

         const res = await fetch(form.action, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } });
         if (res.ok) {
            form.reset();
            statusEl.textContent = 'Thanks! Your message has been sent.';
         } else {
            statusEl.textContent = 'Something went wrong. Please try again or email/text us directly.';
         }
      });
   </script>


</body>

</html>